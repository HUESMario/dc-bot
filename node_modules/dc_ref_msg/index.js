'use strict';

const Structures = require('discord.js').Structures;
const Message = require('discord.js').Structures.get('Message');
/**
 * Represents a referenced Message in Discord.
 * @extends {Message}
 */
class reference_message extends Message {
    _patch (data){
    super._patch(data);
    if ('referenced_message' in data && data.referenced_message !== null) {
    this.channel.messages.fetch(this.reference.messageID).then((value) => {
      this.referenced_message = value;
    })
    }
    else 
    {
      this.referenced_message = null;
    }
  }

  referenceIsNull = () => {
    return this.referenced_message === null;  
  }
}

const extendIt = (toExtend) => {
  Structures.extend('Message', () => toExtend);
}

module.exports = {
  reference: reference_message,
  extend: extendIt
};
